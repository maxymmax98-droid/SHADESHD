<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHD Каталог и не только! (Скример включен)</title>

    <style>
    /* --- СТИЛИ СКРИМЕРА (На весь экран) --- */
    #screamer-container {
        position: fixed; 
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: black;
        z-index: 99999; /* Перекрывает абсолютно все */
        display: none; /* Изначально скрыто */
        overflow: hidden; 
    }
    #screamer-video {
        width: 100%;
        height: 100%;
        object-fit: cover; /* Заполнение всего контейнера */
    }

    /* --- СТИЛИ ЗАГЛУШКИ "КЛИКНИТЕ" --- */
    #click-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: rgba(0, 0, 0, 0.95);
        z-index: 9999;
        text-align: center;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    
    /* 1. ОСНОВНЫЕ СТИЛИ ВАШЕГО САЙТА (Взято из ваших сниппетов) */
    body { 
        margin:0; 
        font-family:'Arial',sans-serif; 
        background:#1a1a1a; 
        color:#eee;   
        /* Пример вашей фоновой анимации */
        background: repeating-linear-gradient(45deg, #1a1a1a, #1a1a1a 10px, #222 10px, #222 20px);
        animation: backgroundMove 60s linear infinite;
        position: relative;
        min-height: 100vh;
    }
    .section {
        display: none; /* Все секции по умолчанию скрыты */
        padding: 20px;
    }
    .section.active {
        display: block; /* Активная секция отображается */
    }
    </style>
</head>
<body>
    
    <div id="screamer-container">
        <video id="screamer-video" preload="auto" playsinline>
        </video>
    </div>

    <div id="click-overlay">
        <h1 style="color: white;">Нажмите в любом месте, чтобы запустить сайт</h1>
        <p style="color: gray;">(Это необходимо для активации звука)</p>
    </div>

    <nav style="text-align: center; padding: 10px; background: #222;">
        <button onclick="showSection('home')" class="active">Главная</button>
        <button onclick="showSection('servers-list')">Сервера</button>
    </nav>
    
    <div id="home" class="section">
        <h1>Добро пожаловать в SHD Каталог!</h1>
        <p>Основной контент вашего сайта.</p>
    </div>
    
    <div id="servers-list" class="section">
        <h2>Список серверов</h2>
        <div class="card">...</div>
    </div>

    <script>
    // *** КОНСТАНТЫ И ВЕБХУКИ ***
    // (ВАШИ СУЩЕСТВУЮЩИЕ КОНСТАНТЫ ДОЛЖНЫ БЫТЬ ЗДЕСЬ)
    const WEBHOOK_URL = 'https://discord.com/api/webhooks/...'; // Пример
    const TICKET_DELAY_MS = 60000; // Пример

    // *** ФУНКЦИИ НАВИГАЦИИ (Ваша функция showSection) ***
    function showSection(sectionId) {
        // 1. Скрываем все секции
        document.querySelectorAll('.section').forEach(sec => {
            sec.classList.remove('active');
        });

        // 2. Отображаем нужную секцию
        const targetSection = document.getElementById(sectionId);
        if (targetSection) {
            targetSection.classList.add('active');
        }
        
        // 3. Обновление кнопок навигации (для примера)
        document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
        const activeBtn = document.querySelector(`nav button[onclick*="showSection('${sectionId}')"]`);
        if (activeBtn) activeBtn.classList.add('active');

        // Дополнительно: скрываем меню и форму ЛК (как в ваших сниппетах)
        const menu = document.getElementById('menuContent');
        const form = document.getElementById('projectForm');
        if (menu) menu.style.display = 'none';
        if (form) form.style.display = 'none';
    }


    // *** ЛОГИКА СКРИМЕРА (30% ШАНС) ***
    const CHANCE_PERCENT = 30;
    const SCREAMER_VIDEOS = [
        "Скримак_1.mp4",
        "Скример_2.mp4"
    ];

    function launchScreamer() {
        const container = document.getElementById('screamer-container');
        const videoElement = document.getElementById('screamer-video');
        
        // 1. Выбираем случайное видео
        const randomIndex = Math.floor(Math.random() * SCREAMER_VIDEOS.length);
        videoElement.src = SCREAMER_VIDEOS[randomIndex];

        // 2. Отображаем контейнер и запускаем. 
        // Звук сработает, так как функция вызвана после клика пользователя.
        container.style.display = 'block';
        videoElement.muted = false; 
        
        videoElement.play()
            .then(() => {
                console.log("[Screamer] Видео запущено со ЗВУКОМ.");
            })
            .catch(error => {
                console.error("[Screamer] Ошибка воспроизведения. Возможно, видеофайл не найден:", error);
            });

        // 3. Скрываем контейнер после окончания видео
        videoElement.onended = () => {
            container.style.display = 'none';
            showSection('home'); 
        };
    }

    function checkScreamerChance() {
        const randomNumber = Math.floor(Math.random() * 100) + 1;
        if (randomNumber <= CHANCE_PERCENT) {
            console.log(`[Screamer] Шанс сработал (${randomNumber}%). Запуск!`);
            // Запускаем через 100мс
            setTimeout(launchScreamer, 100); 
            return true;
        }
        console.log(`[Screamer] Шанс не сработал (${randomNumber}%).`);
        return false;
    }
    // *** КОНЕЦ ЛОГИКИ СКРИМЕРА ***


    // *** ОБРАБОТЧИК ДЛЯ ГАРАНТИИ ЗВУКА И СТАРТА ***
    function handleFirstInteraction() {
        const overlay = document.getElementById('click-overlay');
        
        // Если скример сработал (30% шанс), launchScreamer скроет оверлей и покажет видео
        if (checkScreamerChance()) {
            return; 
        }
        
        // Если скример НЕ сработал (70% шанс), скрываем оверлей и показываем главную страницу
        overlay.style.display = 'none';
        showSection('home');
        
        // Убираем обработчик, так как он больше не нужен
        document.removeEventListener('click', handleFirstInteraction);
        document.removeEventListener('touchstart', handleFirstInteraction);
    }
    
    // *** ИНИЦИАЛИЗАЦИЯ (Ваша функция) ***
    // (Предполагаем, что initializeSettings, updateServerStatus и updateWebsiteStatus существуют)
    function initializeStatuses() {
        // initializeSettings(); 
        
        // document.querySelectorAll('.card').forEach(updateServerStatus);
        // updateWebsiteStatus(); 

        // showServerList('servers-list'); // Если у вас есть эта функция
        
        const mobileSettings = document.getElementById('settings-mobile-container');
        if (window.innerWidth <= 600 && mobileSettings) {
            mobileSettings.style.display = 'block';
        }

        // НЕ ВЫЗЫВАЕМ showSection('home'), так как это сделает скример или обработчик клика!
    }

    // --- ФИНАЛЬНЫЕ ЗАПУСКИ ---
    // Ждем первого клика или тача на странице для запуска логики
    document.addEventListener('click', handleFirstInteraction, { once: true });
    document.addEventListener('touchstart', handleFirstInteraction, { once: true }); 

    // Запуск вашей главной функции инициализации при загрузке
    document.addEventListener('DOMContentLoaded', initializeStatuses);
    </script>
</body>
</html>