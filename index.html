<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHD Каталог и не только!</title>
    
    <style>
/* ---------------------------------------------------- */
/* --- 1. Основные и общие стили ---------------------- */
/* ---------------------------------------------------- */
body { 
    margin:0; 
    font-family:'Arial',sans-serif; 
    background:#1a1a1a; 
    color:#eee; 
    opacity: 0; 
    transition: opacity 1s ease-out; 
}

/* --- НОВЫЙ КОНТЕЙНЕР ДЛЯ ИМИТАЦИИ ОКНА --- */
.container {
    max-width: 900px; /* Максимальная ширина "окна" */
    margin: 20px auto; /* Центрирование по горизонтали с отступами */
    background: #222; /* Фон основного контента */
    border-radius: 15px; /* Скругленные углы "окна" */
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), 0 0 50px rgba(255, 0, 0, 0.4); /* Красивая тень */
    padding: 0;
    overflow: hidden; /* Обрезка содержимого */
}
/* Стилизация header для вставки в контейнер */
.container header {
    margin: 0;
    border-radius: 15px 15px 0 0; /* Скругление только верхних углов */
}
/* Стилизация nav для вставки в контейнер */
.container nav {
    border-radius: 0;
}
/* --- КОНЕЦ НОВОГО КОНТЕЙНЕРА --- */

/* --- Стили Header (Версия V7.0.3) --- */
header { 
    background: linear-gradient(120deg, #660000, #990000); 
    padding:20px; 
    text-align:center; 
    font-size:32px; 
    font-weight:bold; 
    letter-spacing:2px; 
    color: #fff; 
    text-shadow: 0 0 10px #ff0000, 0 0 20px #ff2222; 
    transition: all 0.3s ease;
    animation: textFlicker 3s infinite alternate; 
    position: relative; 
}
header::after {
    content: "V.7.0.3"; /* ОБНОВЛЕННАЯ ВЕРСИЯ */
    position: absolute;
    bottom: 5px;
    right: 5px;
    font-size: 10px;
    color: #ff5555;
    text-shadow: none;
    letter-spacing: 0;
}
header:hover { text-shadow: 0 0 20px #ff4444, 0 0 40px #ff0000; }

/* --- Кнопка и Панель Настроек (Общие) --- */
#settings-panel-mobile {
    z-index: 999;
    display: none; 
    flex-direction: column;
    gap: 15px;
    padding: 15px;
    background: rgba(43, 43, 43, 0.9);
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
    animation: fadeIn 0.3s ease-out;
    position: static; 
    margin: 10px 0; 
    width: calc(100% - 30px); 
}

/* Дополнительные настройки в панели (Тестировщик) */
.setting-group { display: flex; flex-direction: column; gap: 5px; }
.setting-group label { font-weight: bold; color: #ff9999; font-size: 14px; }
.toggle-btn {
    padding: 8px 12px;
    background: #555;
    color: #fff;
    border: 1px solid #777;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.2s ease;
}
.toggle-btn.active {
    background: #008800;
    border-color: #00ff00;
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
}

/* --- Навигация --- */
nav { display:flex; justify-content:center; background:#222; padding:15px; flex-wrap:wrap; }
nav button { 
    margin:5px 10px; padding:12px 20px; background:#880000; color:#fff; border:none; 
    border-radius:5px; cursor:pointer; transition: transform 0.2s ease, background 0.25s ease; 
}
nav button:hover { background:#ff0000; transform:scale(1.1); box-shadow: 0 0 15px rgba(255, 0, 0, 0.9); }
nav button:active { transform:scale(0.95); }

/* --- Кнопки переключения (Сервера/Проекты) --- */
.button-switch { 
    background: #2b2b2b; border: 2px solid #555; padding: 12px 20px; 
    margin: 10px 10px; border-radius: 10px; color: #fff; text-align: center; 
    cursor: pointer; transition: all 0.3s ease; flex-grow: 1; max-width: 200px;
}
.button-switch:hover { 
    transform: scale(1.05); background: #444; box-shadow: 0 0 15px rgba(255, 50, 50, 0.5); 
}
/* ИСПРАВЛЕНИЕ БАГА: Эффект активной кнопки */
.button-switch.active { 
    background: #ff0000; border-color: #ff5555; 
    box-shadow: 0 0 30px rgba(255, 0, 0, 1), 0 0 60px rgba(0, 50, 255, 0.7); 
    transform: scale(1.05); animation: switchPulse 0.8s infinite alternate; 
}

/* --- Кнопки фильтрации (PvP, Parkour и т.д.) --- */
.filter-btn { margin:5px; padding:10px 15px; border:none; border-radius:5px; background:#444; color:#fff; cursor:pointer; transition:0.2s; }
.filter-btn:hover { 
    background:#C00000; transform:scale(1.1); box-shadow: 0 0 12px rgba(255, 0, 0, 0.8); 
}
/* ИСПРАВЛЕНИЕ БАГА: Эффект активного фильтра */
.filter-btn.active { 
    background:#ff0000; 
    box-shadow: 0 0 15px rgba(255, 0, 0, 1); 
    animation: filterPulse 1.5s infinite alternate; 
    transform: scale(1.05);
}

/* --- Кнопка Оптимизации (Главная страница, только для мобильных) --- */
#optimization-btn {
    display: none; /* Скрываем по умолчанию */
    margin: 20px auto;
    width: 80%;
    max-width: 300px;
    padding: 15px 20px;
    background: #008800;
    color: #fff;
    border: 2px solid #00ff00;
    border-radius: 10px;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 0 15px rgba(0, 255, 0, 0.7);
    transition: all 0.3s ease;
}
#optimization-btn:hover {
    background: #00aa00;
    transform: scale(1.05);
}


/* ---------------------------------------------------- */
/* --- 2. Стили Карточек (Серверы/Правила/События/Лидеры) --- */
/* ---------------------------------------------------- */
.card { 
    position: relative; background: #2a2a2a; border-radius: 15px; padding: 15px; 
    margin: 15px 0; display: flex; align-items: center; justify-content: flex-start; 
    cursor: pointer; 
    transition: transform 0.2s ease, background 0.2s ease, box-shadow 0.3s ease; 
    box-shadow: 0 0 5px rgba(255,0,0,0.3); 
}
/* Стандартный hover для сервера */
.card:hover { 
    transform: scale(1.03); background: #4a1a1a; 
    box-shadow: 0 0 35px rgba(255,0,0,1), 0 0 60px rgba(255,50,50,0.8); 
}
.card img { 
    width:20px; height:20px; margin-right:10px; border-radius:50%;
    filter: drop-shadow(0 0 5px rgba(255, 0, 0, 0.7)); 
    transition: filter 0.3s ease;
}
.card h3 { color:#ff5555; margin-bottom:5px; }
.card p { color:#ccc; line-height:1.4; font-size: 14px; }
.card p strong { color: #fff; }

/* --- Онлайн Статус (Зеленый) --- */
.card.online {
    border: 1px solid #00ff00; 
    animation: pulseGreen 2s infinite alternate; 
}
.card.online img {
    filter: drop-shadow(0 0 8px #00ff00); 
}
.card.online:hover {
    background: #1a4a1a; 
    box-shadow: 0 0 35px #00ff00, 0 0 60px #55ff55; 
    animation: none; 
}
@keyframes pulseGreen {
    0% { box-shadow: 0 0 10px #00ff00, 0 0 20px rgba(0, 255, 0, 0.4); }
    100% { box-shadow: 0 0 20px #00ff00, 0 0 40px rgba(0, 255, 0, 0.8); }
}

/* --- Правила (Rule) --- */
.rule { 
    background: linear-gradient(145deg, #2b2b2b, #1c1c1c); 
    border-left:5px solid #ff4444; 
    padding:15px 20px; 
    margin:10px 0; 
    border-radius:15px; 
    box-shadow: 0 0 15px rgba(255,0,0,0.3), 0 5px 10px rgba(0,0,0,0.5); 
    transition: transform 0.3s ease, box-shadow 0.5s ease; 
    position: relative; 
    animation: floatRule 2s ease-in-out infinite alternate;
} 
.rule::before { 
    content: ''; 
    position: absolute; 
    top: -5px; left: -5px; right: -5px; bottom: -5px; 
    border-radius: 18px; 
    box-shadow: 0 0 20px rgba(255,0,0,0.7), 0 0 40px rgba(255,0,0,0.5); 
    opacity: 0.5; 
    filter: blur(4px); 
    transition: all 0.3s ease; 
}
.rule:hover { 
    transform: scale(1.05); 
    box-shadow: 0 0 35px rgba(255,0,0,0.9), 0 8px 20px rgba(0,0,0,0.7); 
}
.rule:hover::before { box-shadow: 0 0 40px rgba(255,0,0,1), 0 0 60px rgba(255,0,0,0.8); }


/* --- Анимация градиента для событий --- */
@keyframes gradientShift {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
}

/* --- События (Calendar) - НОВЫЙ ДИЗАЙН с переливанием тонов красного --- */
.calendar { 
    background: linear-gradient(135deg, #500000, #700000, #900000, #700000, #500000); 
    background-size: 200% 200%; 
    border-radius: 15px; 
    padding: 20px; 
    width: 250px; 
    box-shadow: 0 0 15px rgba(255,0,0,0.5); 
    transition: transform 0.3s ease, box-shadow 0.3s ease; 
    animation: gradientShift 5s ease-in-out infinite alternate; /* Применяем анимацию */
}
.calendar h3 { color: #ff9999; }
.calendar:hover { 
    transform: translateY(-5px) scale(1.05); 
    box-shadow: 0 0 25px rgba(255,0,0,0.8); /* Усиленный блюм при наведении */
    animation: gradientShift 2s ease-in-out infinite alternate; /* Более быстрая анимация при наведении */
}

/* --- Должности (Leaders) --- */
.leaders { display:flex; flex-wrap:wrap; gap:20px; justify-content: center; } /* Центрируем для лучшего вида */
.leader-card { 
    background: linear-gradient(145deg, #2a2a2a, #1c1c1c); 
    border-radius: 15px; 
    padding: 20px; 
    width: 200px; 
    text-align: center; 
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.5), 0 5px 15px rgba(0,0,0,0.7); 
    border: 2px solid #ff2222; 
    transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease; 
}
.leader-card:hover { 
    transform: scale(1.08); 
    box-shadow: 0 0 30px rgba(255,0,0,0.9), 0 0 50px rgba(255,50,50,0.6); 
}


/* ---------------------------------------------------- */
/* --- 3. РЕЖИМЫ ГРАФИКИ (Усилен Hard Mode) --- */
/* ---------------------------------------------------- */

/* --- 3.1. РЕЖИМ СУПЕР-ОПТИМИЗАЦИИ (Value = 0) --- */
.super-optimized-mode .card,
.super-optimized-mode .rule,
.super-optimized-mode .leader-card,
.super-optimized-mode .calendar,
.super-optimized-mode header {
    transition: none !important; 
    animation: none !important; 
    box-shadow: none !important;
    text-shadow: none !important;
    filter: none !important;
    border-radius: 0 !important;
    background: #2b2b2b !important;
    border: 1px solid #444 !important;
    transform: none !important;
}
.super-optimized-mode .rule::before { display: none !important; }
/* Убираем эффекты для календаря в супер-оптимизации */
.super-optimized-mode .calendar {
    background: #2b2b2b !important; /* Стандартный фон */
    border: 1px solid #444 !important;
}

/* --- 3.2. РЕЖИМ ОПТИМИЗАЦИИ (Value = 1) --- */
.optimized-mode .card,
.optimized-mode .rule,
.optimized-mode .leader-card,
.optimized-mode .calendar,
.optimized-mode header {
    transition: none !important; 
    animation: none !important; 
    box-shadow: none !important;
    text-shadow: none !important;
    filter: none !important;
}
.optimized-mode .card:hover, .optimized-mode .rule:hover, .optimized-mode .leader-card:hover {
    transform: none !important;
}
.optimized-mode .card.online { animation: none !important; border: 1px solid #00aa00 !important; }
.optimized-mode .card.online img { filter: none !important; }
.optimized-mode .rule::before { display: none !important; }
/* Убираем эффекты для календаря в оптимизации, оставляем только статический красный фон */
.optimized-mode .calendar {
    background: linear-gradient(145deg, #2b2b2b, #1c1c1c) !important;
    border: 1px solid #ff5555 !important;
    box-shadow: none !important;
}


/* --- 3.3. РЕЖИМ СЛОЖНЫЙ (Hard Mode) (Value = 3) --- */

@keyframes hardPulse {
    /* Более мощный, фиолетово-красный блюм */
    0% { box-shadow: 0 0 40px #ff0000, 0 0 80px #8a2be2, 0 0 120px #ff5555; filter: blur(0px); }
    100% { box-shadow: 0 0 60px #ff4444, 0 0 100px #9370db, 0 0 150px #ff0000; filter: blur(1.5px); } /* Усилено размытие до 1.5px */
}
@keyframes hardPulseGreen {
    /* Более мощный, бирюзово-зеленый блюм */
    0% { box-shadow: 0 0 40px #00ff00, 0 0 80px #00ffaa, 0 0 120px #00ffff; filter: blur(0px); }
    100% { box-shadow: 0 0 60px #55ff55, 0 0 100px #33ffee, 0 0 150px #66ffff; filter: blur(1.5px); }
}
@keyframes glitch {
    0% { transform: translate(0px, 0px) skew(0deg); } 
    30% { transform: translate(-2px, 0px) skew(3deg); } /* Чуть усилен глитч */
    70% { transform: translate(2px, 0px) skew(-3deg); }
    100% { transform: translate(0px, 0px) skew(0deg); }
}

.hard-mode .rule,
.hard-mode .leader-card,
.hard-mode header {
    animation: hardPulse 0.8s infinite alternate !important; 
    filter: contrast(150%);
}

.hard-mode .calendar {
    /* Усиленный эффект для событий в Hard Mode */
    animation: hardPulse 0.8s infinite alternate !important;
    background: linear-gradient(135deg, #ff0000, #ff5500, #ff0000) !important; /* Усиленный красный градиент */
    filter: contrast(150%);
}

.hard-mode .card {
    /* Применяем усиленный блюм к серверам */
    animation: hardPulse 0.8s infinite alternate !important; 
    filter: contrast(150%);
}

/* ОТКЛЮЧЕНИЕ УВЕЛИЧЕНИЯ СЕРВЕРОВ (Hard Mode) */
.hard-mode .card:hover {
    transform: none !important; 
    background: #4a1a1a; /* Сохраняем изменение фона */
    /* Усиленный эффект при наведении, но без движения */
    box-shadow: 0 0 80px rgba(255, 0, 0, 1), 0 0 150px rgba(255, 50, 50, 0.8) !important;
}

/* Сохраняем hover для Правил/Событий/Лидеров */
.hard-mode .rule:hover,
.hard-mode .calendar:hover,
.hard-mode .leader-card:hover {
    transform: scale(1.05) !important; 
}

.hard-mode .card.online,
.hard-mode .card.online:hover {
    animation: hardPulseGreen 0.8s infinite alternate !important; 
    filter: contrast(150%);
}

.hard-mode body {
    animation: glitch 0.1s infinite alternate;
    /* Усилено общее размытие для Hard Mode */
    filter: blur(0.5px); 
}

/* ---------------------------------------------------- */
/* --- 4. Прочие стили и медиа-запросы ---------------- */
/* ---------------------------------------------------- */
@media(max-width:600px){ 
    #settings-btn { display: none; }
    #settings-panel-desktop { display: none !important; }
    #settings-panel-mobile { display: flex; }
    #optimization-btn { display: block; } /* Показываем кнопку оптимизации на мобильных */
}

section { display:none; padding:30px 20px; }
section.active { display:block; }
#calendar.active { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 20px 0; } 
#home-content { background:#2b2b2b; border-radius:15px; padding:20px; text-align:center; margin-top:30px; }
.description-btn { 
    width:30px; height:30px; background:url('Описание.png') no-repeat center/cover; border:none; 
    cursor:pointer; position:absolute; right:15px; top:50%; transform:translateY(-50%); 
    filter: drop-shadow(0 0 10px black); transition: transform 0.2s ease, filter 0.2s ease; 
}
.modal { 
    display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
    background: rgba(0,0,0,0.85); justify-content: center; align-items: center; 
    z-index: 999; opacity: 0; transition: opacity 0.3s ease; 
}
.modal.show { display: flex; opacity: 1; }
.modal-content { 
    background: linear-gradient(145deg, #2a2a2a, #1c1c1c); padding: 25px; 
    border-radius: 15px; max-width: 500px; text-align: center; color: #eee; 
    box-shadow: 0 0 30px #ff5555; opacity: 0; transform: scale(0.7) translateY(-50px); 
    transition: opacity 0.4s ease-out, transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); 
}
.modal.show .modal-content { opacity: 1; transform: scale(1) translateY(0); }
.modal-close-btn { 
    margin-top: 15px; padding: 10px 20px; background: #ff5555; color: #fff; 
    border: 2px solid #ff0000; border-radius: 10px; cursor: pointer; font-size: 16px;
    box-shadow: 0 0 10px rgba(255, 0, 0, 0.8); transition: all 0.3s ease;
}
#copy-code-btn {
    display: none; width: 90%; padding: 10px; margin-top: 10px; background: #00ff00; 
    color: #1a1a1a; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; 
    transition: background 0.2s;
}
footer { position:fixed; bottom:5px; left:5px; font-size:10px; color:#777; }

/* --- ОПРЕДЕЛЕНИЕ НЕДОСТАЮЩИХ ANIMATIONS --- */
@keyframes textFlicker {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
    52% { opacity: 1; }
    54% { opacity: 0.9; }
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}
@keyframes switchPulse {
    0% { transform: scale(1.05) translateX(-1px); box-shadow: 0 0 30px rgba(255, 0, 0, 1); }
    100% { transform: scale(1.06) translateX(1px); box-shadow: 0 0 40px rgba(255, 50, 50, 1.2); }
}
@keyframes filterPulse {
    0% { transform: scale(1.05); box-shadow: 0 0 15px rgba(255, 0, 0, 1); }
    100% { transform: scale(1.06); box-shadow: 0 0 25px rgba(255, 50, 50, 1.5); }
}
@keyframes floatRule {
    0% { transform: translateY(-2px); }
    100% { transform: translateY(2px); }
}
    </style>
</head>

<body>
<div class="container">
    <header>
        SHD Каталог и не только!
    </header>

    <nav>
        <button onclick="showSection('home')">Главная</button>
        <button onclick="showSection('servers')">Официальные</button>
        <button onclick="showSection('rules')">Правила</button>
        <button onclick="showSection('calendar')">События</button>
        <button onclick="showSection('leaders')">Должности</button>
    </nav>

    <section id="home" class="active">
        
        <div id="settings-panel-mobile">
            <div class="setting-group">
                <label>Дополнительные функции</label>
                <button id="tester-toggle-mobile" class="toggle-btn" onclick="toggleTesterMode()">Тестировщик</button>
            </div>
        </div>
        
        <button id="optimization-btn" onclick="applyMode(1)">Включить Оптимизацию (Убрать Bloom)</button>

        <div id="home-content">
            <h2>Здравствуйте! Вы попали в SHD Catalog V.7.0.3, в котором собрана информация о проектах и серверах клана, также правила и события.</h2>
            <p>Одна из целей клана: собрать самых адекватных игроков и создать своё комьюнити адекватных серверов!</p>
            <p>Catalog/каталог By R1SS5</p>
        </div>
    </section>

    <section id="servers">
        <h2>Сервера и Проекты</h2>
        <div style="display:flex; justify-content:center; gap:20px; margin-bottom: 20px;">
            <div id="servers-switch-btn" class="button-switch active" onclick="showServerList('servers-list')">Сервера</div>
            <div id="projects-switch-btn" class="button-switch" onclick="showServerList('projects-list')">Проекты</div>
        </div>

    <div class="filter-menu" style="text-align:center; margin:20px 0;">
            <button class="filter-btn active" data-filter="all" onclick="filterType('all')">Все</button>
            <button class="filter-btn" data-filter="pvp" onclick="filterType('pvp')">PvP</button>
            <button class="filter-btn" data-filter="parkour" onclick="filterType('parkour')">Паркур</button>
            <button class="filter-btn" data-filter="escape" onclick="filterType('escape')">Побег</button>
            <button class="filter-btn" data-filter="anarchy" onclick="filterType('anarchy')">Анархия</button>
            <button class="filter-btn" data-filter="rp" onclick="filterType('rp')">RP</button>
        </div>

        <div id="servers-list">
            <div class="card" data-type="pvp" data-status-id="0" data-server-code="G7R9" data-info="..."> 
                <img src="Офлайн.png" alt="Статус"> 
                <div>
                    <h3>SHD-PvP</h3>
                    <p>Статус: Неактивен</p>
                </div>
                <button class="description-btn" onclick="openModal('**SHD-PvP** - сервер в PvP режиме, запускаеться для обучения солдат **SHD** \n\n**Особенности:** Бои 1v1 , арена, регулярный запуск.','G7R9', 'Тестовый код: G7R9, IP: 192.168.0.21')"></button>
            </div>
            <div class="card" data-type="parkour" data-status-id="0" data-server-code="A1B5" data-info="...">
                <img src="Офлайн.png" alt="Статус">
                <div>
                    <h3>Паркур на крюках</h3>
                    <p>Статус: Офлайн</p>
                </div>
                <button class="description-btn" onclick="openModal('Паркур, который увеличивает сложность каждым уровнем, - крюки в комнатах. \n\n**Особенности:** Многоуровневые карты, таблицы лидеров, система ивентов. Сервер ожидает крупное обновление карты и механик.','A1B5', 'Тестовый код: A1B5, IP: 192.168.022.2')"></button>
            </div>
            <div class="card" data-type="escape" data-status-id="0" data-server-code="C3P0" data-info="Идет вайп">
                <img src="Офлайн.png" alt="Статус">
                <div>
                    <h3>Побег из тюрьмы "S.H.A.D.E"</h3>
                    <p>Статус: Загрузка
...</p>
                </div>
                <button class="description-btn" onclick="openModal('Классический сервер "Побег из тюрьмы" с кастомными механиками и системой прокачки. \n\n*Особенности:* Различные классы, зоны охраны, секретные пути и экономика. В данный момент идет полный вайп перед новым сезоном.','C3P0', 'Тестовый код: C3P0, IP: 192.168.0.3')"></button>
            </div>
        </div>

        <div id="projects-list" style="display:none;">
            <div class="card" data-type="project-escape" data-status-id="0" data-server-code="X5Y7" data-info="Альфа-тестирование">
                <img src="Офлайн.png" alt="Статус">
                <div>
                    <h3>Побег из тюрьмы "S.H.A.D.E" (с модами)</h3>
                    <p>Статус: Загрузка...</p>
                </div>
                <button class="description-btn" onclick="openModal('**Побег из тюрьмы с модами** — расширенная версия классического Побега. Включает модификации для улучшения геймплея, новые предметы и механики. Оптимизирован и находится на стадии **Альфа-тестирования**.\n\n*Особенности:* Кастомные моды, глубокая система крафта, новые квесты.','X5Y7', 'Продюсер: R1SS5\nСтадия: Альфа')"></button>
            </div>
            <div class="card" data-type="project-anarchy" data-status-id="0" data-server-code="K2M9" data-info="Новый сезон">
                <img src="Офлайн.png" alt="Статус">
                <div>
                    <h3>Criminal Islands (с модами)</h3>
                    <p>Статус: Не работает</p>
                </div>
                <button class="description-btn" onclick="openModal('**Criminal Islands** - Проект, переживший многое, но ему это не помешало...  \n\n**Особенности:** Кастомные моды, уникальный мир, система ящиков. **Запуск не скоро...*.','K2M9', 'Разработчики: М-3 и REISAIN\nСтадия: Прототип')"></button>
            </div>
            <div class="card" data-type="project-rp" data-status-id="0" data-server-code="L3R4" data-info="Релиз">
                <img src="Офлайн.png" alt="Статус">
                <div>
                    <h3>RayRP (с модами)</h3>
                    <p>Статус: Не работает</p>
                </div>
                <button class="description-btn" onclick="openModal('**RayRP** - полноценный RolePlay проект с глубокой проработкой лора, профессий и взаимодействия между игроками. \n\n*Особенности:* Моды для РП, хорошая администрация, система связи. Проект пока-что не сделан **...ЖДИТЕ...**','L3R4', ' ')"></button>
            </div>
        </div>
    </section>

    <section id="rules">
        <h2>Правила</h2>
        <div class="rule">1. 18+ контент запрещен - Кик/Мут/Бан</div>
        <div class="rule">2. Спам (сообщения, команды) запрещён -  Мут</div>
        <div class="rule">3. Скам и мошенничество (обман игроков/администрации) запрещено - Перманентный Бан</div>
        <div class="rule">4. *Оскорбления (в адрес игроков, администрации, проекта) запрещены - Мут/Бан</div>
        <div class="rule">5. Предательство (клана, союзников) -  Бан на проектах/исключение из клана</div>
        <div class="rule">6. Неактив (без предупреждения) - Кик с проекта/исключение из клана</div>
        <div class="rule">7. Не перечить Администратору (в рамках правил) - Мут/Бан на усмотрение Администрации</div>
        <div class="rule">8. Использование читов/стороннего ПО - Перманентный Бан</div>
    </section>

    <section id="calendar">
        <h2>События</h2>
        <div class="calendar">
            <h3>6 число</h3>
            <p>Собрание клана. Обсуждение новостей, планов и проблем.</p>
            <small>КАЖДЫЙ МЕСЯЦ</small>
        </div>
        <div class="calendar">
            <h3>...Пока не готово...</h3>
            <p>...Пока не готово...</p>
            <small>СЛЕДИТЕ ЗА НОВОСТЯМИ</small>
        </div>
        <div class="calendar">
            <h3>...Пока не готово...</h3>
            <p>...Пока не готово...</p>
            <small>СЛЕДИТЕ ЗА НОВОСТЯМИ</small>
        </div>
    </section>

    <section id="leaders">
        <h2>Должности</h2>
        <div class="leaders">
            <div id="leader-m3" class="leader-card"><h3>М-3 [SHD]</h3><p>Вождь | Основатель</p></div>
            <div class="leader-card"><h3>REisain [SHD]</h3><p>Заместитель | Главный разработчик</p></div>
            <div class="leader-card"><h3>Красный [SHD]</h3><p>Заместитель</p></div>
            <div class="leader-card"><h3>Melope [SHD]</h3><p>Министр | Пвпшер</p></div>
        </div>
    </section>

    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-content-inner" style="display:flex; flex-direction: column; align-items:center; justify-content:center; gap:15px; width:100%;">
                <img id="modal-avatar" src="" alt="Аватар" style="width:180px; height:180px; border-radius:20px; border:4px solid #ff5555; display:none; object-fit:cover; box-shadow:0 0 20px #ff5555;">
                <p id="modal-text" style="white-space:pre-wrap; font-size:16px; color:#eee; margin:0; max-width:100%; text-align: left;"></p>
            </div>
            <button id="copy-code-btn" onclick="copyServerCode()">Копировать Код:</button>
            <button onclick="closeModal()" class="modal-close-btn">Закрыть</button>
        </div>
    </div>
</div> 

<script>
    let isTesterMode = false;
    let currentServerCode = '';
    const modeNames = {
        0: "Режим Супер-Оптимизации",
        1: "Режим Оптимизации",
        2: "Обычный режим", 
        3: "Режим Сложный"
    };

    // --- Утилиты ---
    function showSection(sectionId) {
        document.querySelectorAll('section').forEach(section => {
            section.classList.remove('active');
            // Управление display через CSS класс .active
        });
        document.getElementById(sectionId).classList.add('active');

        document.querySelectorAll('nav button').forEach(button => {
            button.classList.remove('active');
        });
        const activeNavButton = document.querySelector(`nav button[onclick="showSection('${sectionId}')"]`);
        if (activeNavButton) {
            activeNavButton.classList.add('active');
        }
        
        // При переключении секции, сбрасываем фильтр для секции серверов
        if (sectionId === 'servers') {
             // Инициализируем фильтр и список по умолчанию
            showServerList('servers-list');
            filterType('all');
        }
    }

    function showServerList(listId) {
        document.getElementById('servers-list').style.display = 'none';
        document.getElementById('projects-list').style.display = 'none';
        document.getElementById(listId).style.display = 'block';

        // ИСПРАВЛЕНИЕ: Переключение активного класса для кнопок Сервера/Проекты
        document.getElementById('servers-switch-btn').classList.remove('active');
        document.getElementById('projects-switch-btn').classList.remove('active');
        
        if (listId === 'servers-list') {
            document.getElementById('servers-switch-btn').classList.add('active');
        } else {
            document.getElementById('projects-switch-btn').classList.add('active');
        }

        // Сброс фильтра при смене списка
        filterType('all');
    }

    // ИСПРАВЛЕНИЕ: Логика фильтрации и подсвечивания активной кнопки
    function filterType(type) {
        const currentList = document.getElementById('servers-list').style.display === 'block' ? 
                            document.getElementById('servers-list') : 
                            document.getElementById('projects-list');

        currentList.querySelectorAll('.card').forEach(card => { 
            const cardType = card.dataset.type;
            
            // Логика отображения: 'escape' включает 'project-escape' и т.д.
            if(type === 'all' || cardType === type || cardType.includes(type) ){ 
                card.style.display = 'flex'; 
            } else { 
                card.style.display = 'none'; 
            } 
        });
        
        // ИСПРАВЛЕНИЕ БАГА: Корректное переключение активного класса
        document.querySelectorAll('.filter-menu .filter-btn').forEach(button => {
            button.classList.remove('active');
        });
        
        // Находим кнопку по атрибуту data-filter, а не по onclick (надежнее)
        const activeFilterButton = document.querySelector(`.filter-menu button[data-filter="${type}"]`);
        if (activeFilterButton) {
            activeFilterButton.classList.add('active');
        }
    }

    // --- Настройки и Тестировщик ---
    function toggleTesterMode() {
        isTesterMode = !isTesterMode;
        
        const btnMobile = document.getElementById('tester-toggle-mobile');
        
        const servers = document.querySelectorAll('.card');
        
        servers.forEach(card => {
            card.classList.toggle('tester-mode', isTesterMode);
        });

        const btnText = isTesterMode ? 'Тестировщик: ВКЛ' : 'Тестировщик';
        
        if (btnMobile) {
            btnMobile.textContent = btnText;
            btnMobile.classList.toggle('active', isTesterMode);
        }
        
        // Переоткрытие модального окна, если оно открыто, для обновления Debug Info
        const modal = document.getElementById('modal');
        if (modal.classList.contains('show')) {
            const originalText = document.getElementById('modal-text').dataset.originalText;
            const currentServerCode = document.getElementById('copy-code-btn').textContent.replace('Копировать Код: ', '');
            
            const descriptionButton = document.querySelector(`.card[data-server-code="${currentServerCode}"] .description-btn`);
            let debugInfo = '';
            if (descriptionButton) {
                const onclickString = descriptionButton.getAttribute('onclick');
                // Извлекаем третий аргумент функции openModal (debugInfo)
                const match = onclickString.match(/'([^']*)'\s*\)$/);
                if (match && match[1]) {
                    debugInfo = match[1];
                }
            }
            // openModal вызывается с тремя аргументами: текст, код, debugInfo
            openModal(originalText, currentServerCode, debugInfo);
        }
    }

    function applyMode(value) {
        value = parseInt(value, 10);
        const body = document.body;
        
        body.classList.remove('super-optimized-mode', 'optimized-mode', 'hard-mode');

        switch(value) {
            case 0: body.classList.add('super-optimized-mode'); break;
            case 1: body.classList.add('optimized-mode'); break;
            case 3: body.classList.add('hard-mode'); break;
        }
        
        // Применяем 1 (Оптимизация) при нажатии на кнопку "Оптимизация"
        const optBtn = document.getElementById('optimization-btn');
        if (optBtn) {
            if (value === 1) {
                optBtn.textContent = 'Оптимизация ВКЛ';
                optBtn.style.background = '#00aa00';
                // Кнопка возвращает в обычный режим, если нажать еще раз
                optBtn.onclick = () => applyMode(2); 
            } else if (value === 2) {
                optBtn.textContent = 'Включить Оптимизацию (Убрать Bloom)';
                optBtn.style.background = '#008800';
                optBtn.onclick = () => applyMode(1);
            }
        }
        
        localStorage.setItem('shd_display_mode', value); 
    }

    // --- Модальное окно ---
    function openModal(text, serverCode, debugInfo = '') {
        const modal = document.getElementById('modal');
        currentServerCode = serverCode;
        
        document.getElementById('modal-text').dataset.originalText = text; 
        
        let modalContent = text.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');

        if (isTesterMode && debugInfo) {
            modalContent += '<br><br>--- <strong>Debug Info</strong> ---<br>' + debugInfo.replace(/\n/g, '<br>');
        }
        
        document.getElementById('modal-text').innerHTML = modalContent;
        
        const avatarMap = {
            'K2M9': 'Аватарка_CI.png'
            // Добавьте другие коды серверов и соответствующие аватарки при необходимости
        };
        
        const avatarImg = document.getElementById('modal-avatar');
        if (avatarMap[serverCode]) {
            avatarImg.src = avatarMap[serverCode];
            avatarImg.style.display = 'block';
        } else {
            avatarImg.style.display = 'none';
        }
        
        document.getElementById('copy-code-btn').textContent = `Копировать Код: ${currentServerCode}`;
        document.getElementById('copy-code-btn').style.display = 'block';
        
        modal.classList.add('show'); 
        modal.style.display = 'flex'; 
    } 

    function closeModal() {
        const modal = document.getElementById('modal');
        modal.classList.remove('show');
        // Задержка перед скрытием для корректной анимации
        setTimeout(() => {
            modal.style.display = 'none';
        }, 300);
    }
    
    function copyServerCode() {
        // Извлекаем код из текста кнопки
        const code = document.getElementById('copy-code-btn').textContent.replace('Копировать Код: ', '');
        navigator.clipboard.writeText(code).then(() => {
            const btn = document.getElementById('copy-code-btn');
            const originalText = btn.textContent;
            btn.textContent = 'Код скопирован!';
            btn.style.background = '#55ff55';
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = '#00ff00';
            }, 1000);
        }).catch(err => {
            console.error('Не удалось скопировать код: ', err);
            alert('Не удалось скопировать код. Пожалуйста, скопируйте вручную.');
        });
    }

    // --- Инициализация ---
    document.addEventListener('DOMContentLoaded', () => {
        // Устанавливаем активный класс для кнопки навигации по умолчанию
        document.querySelector('nav button').classList.add('active');
        
        // Плавное появление body
        document.body.style.opacity = 1;
        
        // Восстановление режима из localStorage или установка "Обычный режим" (2)
        const storedMode = localStorage.getItem('shd_display_mode');
        if (storedMode !== null) {
            applyMode(parseInt(storedMode, 10));
        } else {
            applyMode(2); // Устанавливаем обычный режим по умолчанию, чтобы видеть цвета
        }
    });
</script>
</body>
</html>